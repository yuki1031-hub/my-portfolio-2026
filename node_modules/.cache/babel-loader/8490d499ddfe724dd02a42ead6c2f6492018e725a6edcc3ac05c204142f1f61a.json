{"ast":null,"code":"import { frame, cancelFrame } from '../frameloop/frame.mjs';\nimport { numberValueTypes } from '../value/types/maps/number.mjs';\nimport { getValueAsType } from '../value/types/utils/get-as-type.mjs';\nclass MotionValueState {\n  constructor() {\n    this.latest = {};\n    this.values = new Map();\n  }\n  set(name, value, render, computed) {\n    let useDefaultValueType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    const existingValue = this.values.get(name);\n    if (existingValue) {\n      existingValue.onRemove();\n    }\n    const onChange = () => {\n      const v = value.get();\n      if (useDefaultValueType) {\n        this.latest[name] = getValueAsType(v, numberValueTypes[name]);\n      } else {\n        this.latest[name] = v;\n      }\n      render && frame.render(render);\n    };\n    onChange();\n    const cancelOnChange = value.on(\"change\", onChange);\n    computed && value.addDependent(computed);\n    const remove = () => {\n      cancelOnChange();\n      render && cancelFrame(render);\n      this.values.delete(name);\n      computed && value.removeDependent(computed);\n    };\n    this.values.set(name, {\n      value,\n      onRemove: remove\n    });\n    return remove;\n  }\n  get(name) {\n    var _this$values$get;\n    return (_this$values$get = this.values.get(name)) === null || _this$values$get === void 0 ? void 0 : _this$values$get.value;\n  }\n  destroy() {\n    for (const value of this.values.values()) {\n      value.onRemove();\n    }\n  }\n}\nexport { MotionValueState };","map":{"version":3,"names":["MotionValueState","constructor","latest","values","Map","set","name","value","render","computed","useDefaultValueType","arguments","length","undefined","existingValue","get","onRemove","onChange","v","getValueAsType","numberValueTypes","frame","cancelOnChange","on","addDependent","remove","cancelFrame","delete","removeDependent","_this$values$get","destroy"],"sources":["C:\\Users\\hishi\\Documents\\ポートフォリオ2026\\portfolio\\my-portfolio-2026\\node_modules\\motion-dom\\src\\effects\\MotionValueState.ts"],"sourcesContent":["import { AnyResolvedKeyframe } from \"../animation/types\"\nimport { cancelFrame, frame } from \"../frameloop/frame\"\nimport { MotionValue } from \"../value\"\nimport { numberValueTypes } from \"../value/types/maps/number\"\nimport { getValueAsType } from \"../value/types/utils/get-as-type\"\n\nexport class MotionValueState {\n    latest: { [name: string]: AnyResolvedKeyframe } = {}\n\n    private values = new Map<\n        string,\n        { value: MotionValue; onRemove: VoidFunction }\n    >()\n\n    set(\n        name: string,\n        value: MotionValue,\n        render?: VoidFunction,\n        computed?: MotionValue,\n        useDefaultValueType = true\n    ) {\n        const existingValue = this.values.get(name)\n\n        if (existingValue) {\n            existingValue.onRemove()\n        }\n\n        const onChange = () => {\n            const v = value.get()\n\n            if (useDefaultValueType) {\n                this.latest[name] = getValueAsType(v, numberValueTypes[name])\n            } else {\n                this.latest[name] = v\n            }\n\n            render && frame.render(render)\n        }\n\n        onChange()\n\n        const cancelOnChange = value.on(\"change\", onChange)\n\n        computed && value.addDependent(computed)\n\n        const remove = () => {\n            cancelOnChange()\n            render && cancelFrame(render)\n            this.values.delete(name)\n            computed && value.removeDependent(computed)\n        }\n\n        this.values.set(name, { value, onRemove: remove })\n\n        return remove\n    }\n\n    get(name: string): MotionValue | undefined {\n        return this.values.get(name)?.value\n    }\n\n    destroy() {\n        for (const value of this.values.values()) {\n            value.onRemove()\n        }\n    }\n}\n"],"mappings":";;;MAMaA,gBAAgB;EAA7BC,YAAA;IACI,IAAM,CAAAC,MAAA,GAA4C,EAAE;IAE5C,KAAAC,MAAM,GAAG,IAAIC,GAAG,EAGrB;;EAEHC,GAAGA,CACCC,IAAY,EACZC,KAAkB,EAClBC,MAAqB,EACrBC,QAAsB,EACI;IAAA,IAA1BC,mBAAmB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAE1B,MAAMG,aAAa,GAAG,IAAI,CAACX,MAAM,CAACY,GAAG,CAACT,IAAI,CAAC;IAE3C,IAAIQ,aAAa,EAAE;MACfA,aAAa,CAACE,QAAQ,EAAE;;IAG5B,MAAMC,QAAQ,GAAGA,CAAA,KAAK;MAClB,MAAMC,CAAC,GAAGX,KAAK,CAACQ,GAAG,EAAE;MAErB,IAAIL,mBAAmB,EAAE;QACrB,IAAI,CAACR,MAAM,CAACI,IAAI,CAAC,GAAGa,cAAc,CAACD,CAAC,EAAEE,gBAAgB,CAACd,IAAI,CAAC,CAAC;OAChE,MAAM;QACH,IAAI,CAACJ,MAAM,CAACI,IAAI,CAAC,GAAGY,CAAC;;MAGzBV,MAAM,IAAIa,KAAK,CAACb,MAAM,CAACA,MAAM,CAAC;IAClC,CAAC;IAEDS,QAAQ,EAAE;IAEV,MAAMK,cAAc,GAAGf,KAAK,CAACgB,EAAE,CAAC,QAAQ,EAAEN,QAAQ,CAAC;IAEnDR,QAAQ,IAAIF,KAAK,CAACiB,YAAY,CAACf,QAAQ,CAAC;IAExC,MAAMgB,MAAM,GAAGA,CAAA,KAAK;MAChBH,cAAc,EAAE;MAChBd,MAAM,IAAIkB,WAAW,CAAClB,MAAM,CAAC;MAC7B,IAAI,CAACL,MAAM,CAACwB,MAAM,CAACrB,IAAI,CAAC;MACxBG,QAAQ,IAAIF,KAAK,CAACqB,eAAe,CAACnB,QAAQ,CAAC;IAC/C,CAAC;IAED,IAAI,CAACN,MAAM,CAACE,GAAG,CAACC,IAAI,EAAE;MAAEC,KAAK;MAAES,QAAQ,EAAES;IAAM,CAAE,CAAC;IAElD,OAAOA,MAAM;;EAGjBV,GAAGA,CAACT,IAAY;IAAA,IAAAuB,gBAAA;IACZ,QAAAA,gBAAA,GAAO,IAAI,CAAC1B,MAAM,CAACY,GAAG,CAACT,IAAI,CAAC,cAAAuB,gBAAA,uBAArBA,gBAAA,CAAuBtB,KAAK;;EAGvCuB,OAAOA,CAAA;IACH,KAAK,MAAMvB,KAAK,IAAI,IAAI,CAACJ,MAAM,CAACA,MAAM,EAAE,EAAE;MACtCI,KAAK,CAACS,QAAQ,EAAE;;;AAG3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}